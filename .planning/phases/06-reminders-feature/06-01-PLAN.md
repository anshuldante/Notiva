---
phase: 06-reminders-feature
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/features/REMINDERS.md
  - docs/README.md
autonomous: true

must_haves:
  truths:
    - "Developer can find REMINDERS.md from docs/README.md navigation"
    - "Developer can trace a reminder creation from UI to database"
    - "Developer can trace a reminder update from UI to database"
    - "Developer can trace a reminder deletion from UI to database"
    - "Developer understands reminder lifecycle states (active, inactive, expired)"
    - "Developer can identify which file handles each step of CRUD operations"
  artifacts:
    - path: "docs/features/REMINDERS.md"
      provides: "Complete reminder feature documentation with CRUD flows"
      min_lines: 300
      contains:
        - "Create Reminder Flow"
        - "Read Reminders Flow"
        - "Update Reminder Flow"
        - "Delete Reminder Flow"
        - "Lifecycle States"
        - "sequenceDiagram"
    - path: "docs/README.md"
      provides: "Updated navigation with working link to REMINDERS.md"
      contains: "features/REMINDERS.md"
  key_links:
    - from: "docs/README.md"
      to: "docs/features/REMINDERS.md"
      via: "navigation table link"
      pattern: "\\[.*\\]\\(features/REMINDERS\\.md\\)"
---

<objective>
Create comprehensive documentation for the Reminders feature, covering all CRUD operations (Create, Read, Update, Delete) with data flow diagrams and sequence diagrams.

Purpose: Enable developers to understand how reminders work from the UI layer through ViewModel and Repository to Room database, so they can confidently modify or extend the reminder functionality.

Output:
- `docs/features/REMINDERS.md` with complete CRUD documentation
- Updated `docs/README.md` with status change for REMINDERS.md
</objective>

<execution_context>
@/Users/ansagagr/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ansagagr/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/ARCHITECTURE.md
@docs/README.md
@docs/ARCHITECTURE.md
@docs/DATABASE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create features directory and REMINDERS.md</name>
  <files>docs/features/REMINDERS.md</files>
  <action>
Create `docs/features/` directory if it does not exist, then create `docs/features/REMINDERS.md` with the following structure:

1. **Header and Introduction**
   - Title: "Reminders Feature"
   - Brief overview of what reminders are in Notiva
   - Link back to Architecture and Database docs

2. **Overview Section**
   - Quick summary of reminder capabilities (create, view, edit, delete, recurrence)
   - Key components table showing file locations:
     - UpsertReminderActivity.java (create/edit UI)
     - MainActivity.java (list view, delete)
     - ReminderDmlViewModel.java (write operations)
     - GetAllRemindersViewModel.java (read operations)
     - ReminderRepository.java (data access abstraction)
     - ReminderDao.java (Room database operations)
     - ReminderModel.java (entity with lifecycle logic)

3. **Reminder Lifecycle States Section**
   - Mermaid state diagram showing: Active, Inactive (user disabled), Expired
   - Explain how `active` boolean field controls enabled/disabled state
   - Explain how `endDateTime` combined with `getNextOccurrenceAfter()` determines expired state
   - Document visual indicators in UI (dimmed appearance, strikethrough text for disabled/expired)

4. **Create Reminder Flow Section**
   - Mermaid sequence diagram showing full flow:
     User -> UpsertReminderActivity (fill form, tap Save)
     -> UpsertReminderActivity.saveReminder() builds ReminderModel
     -> ReminderDmlViewModel.addReminderWithCallback()
     -> ReminderRepository.addWithCallback() submits to ExecutorService
     -> ReminderDao.add() executes INSERT
     -> Callback returns generated ID
     -> ReminderWorkerUtils.enqueueReminderWorker() schedules notification
     -> Activity finishes
   - Document key code paths with actual method names
   - Note validation: recurrence delay required if recurrence enabled

5. **Read Reminders Flow Section**
   - Mermaid sequence diagram showing:
     MainActivity.onCreate() -> observeAllReminders()
     -> GetAllRemindersViewModel.getAllReminders() returns LiveData
     -> ReminderRepository.getAll() wraps DAO
     -> ReminderDao.getAll() returns LiveData<List<ReminderModel>>
     -> Observer in MainActivity receives updates
     -> ReminderItemAdapter.submitList() updates RecyclerView
   - Document reactive data flow with LiveData
   - Note: order by name in SQL query

6. **Update Reminder Flow Section**
   - Mermaid sequence diagram showing edit flow:
     User taps reminder -> MainActivity.startUpsertReminderActivity(model)
     -> Intent extras carry reminder data
     -> UpsertReminderActivity.buildReminderAndSetTitle() reconstructs model
     -> User edits, taps Save
     -> saveReminder() checks id > 0 for update path
     -> ReminderDmlViewModel.updateReminder()
     -> ReminderRepository.update() via ExecutorService
     -> ReminderDao.update() executes UPDATE
   - Also document status toggle flow (active switch):
     User toggles switch -> ReminderItemAdapter.toggleReminderStatus()
     -> ReminderDmlViewModel.updateReminderStatus()
     -> ReminderRepository.updateStatus()
     -> ReminderDao.updateStatus() partial update

7. **Delete Reminder Flow Section**
   - Mermaid sequence diagram showing swipe-to-delete:
     User swipes reminder -> ItemTouchHelper.onSwiped()
     -> ReminderItemAdapter.getReminderAt(position)
     -> ReminderDmlViewModel.deleteReminder()
     -> ReminderRepository.delete() via ExecutorService
     -> ReminderDao.delete() executes DELETE
     -> LiveData automatically updates MainActivity observer
     -> RecyclerView removes item

8. **Data Model Reference Section**
   - Table of ReminderModel fields with types and purposes (reference DATABASE.md)
   - Link to DATABASE.md for full schema details
   - Document `getNextOccurrenceAfter(Calendar now)` method:
     - Purpose: Calculate next trigger time for recurring reminders
     - Logic: Handles NEVER, FOREVER, and interval-based recurrence
     - Returns null if expired or one-time reminder in past

9. **Key Patterns Section**
   - Async operations: ExecutorService for all writes, callbacks for results
   - Reactive reads: LiveData from DAO flows through Repository to ViewModel to Activity
   - Intent extras: How reminder data passes between activities
   - RecyclerView patterns: ListAdapter, DiffCallback, ViewHolder

10. **Code Tracing Quick Reference**
    - Table mapping user actions to code locations:
      | User Action | Entry Point | Flow |
      |-------------|-------------|------|
      | Tap + button | MainActivity FAB | -> UpsertReminderActivity (new) |
      | Tap reminder | ReminderItemAdapter.onItemClick | -> UpsertReminderActivity (edit) |
      | Tap Save | UpsertReminderActivity.saveReminder | -> ViewModel -> Repository -> DAO |
      | Swipe delete | ItemTouchHelper.onSwiped | -> ViewModel -> Repository -> DAO |
      | Toggle switch | ReminderItemAdapter.toggleReminderStatus | -> ViewModel -> Repository -> DAO |

11. **Next Steps Section**
    - Links to Notifications Feature (how reminders trigger notifications)
    - Links to Recurrence Feature (detailed recurrence logic)
    - Link back to Architecture overview
  </action>
  <verify>
File exists at docs/features/REMINDERS.md with:
- At least 4 Mermaid diagrams (state diagram + 4 sequence diagrams)
- All CRUD operations documented
- Lifecycle states explained
- Code tracing reference table
  </verify>
  <done>
docs/features/REMINDERS.md contains comprehensive CRUD documentation with sequence diagrams for create, read, update, and delete flows, plus lifecycle state documentation.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update docs/README.md documentation status</name>
  <files>docs/README.md</files>
  <action>
Update docs/README.md to reflect that REMINDERS.md is now available:

1. In the "Documentation Status" table, change the row for features/REMINDERS.md:
   - Status: Change from "Planned" to "Available"
   - Verify the link path is correct: `features/REMINDERS.md`

2. Verify the "Documentation Navigation" table has correct link:
   - Row: "Understand how reminders work" -> `[Reminders Feature](features/REMINDERS.md)`

3. Update the "Documentation last updated" timestamp at the bottom to reflect this addition.
  </action>
  <verify>
Run: grep -A1 "REMINDERS" docs/README.md
Expected: Shows "Available" status for REMINDERS.md, not "Planned"
  </verify>
  <done>
docs/README.md shows REMINDERS.md as "Available" in Documentation Status table and has correct navigation link.
  </done>
</task>

</tasks>

<verification>
After completing both tasks:

1. Directory structure check:
   ```bash
   ls -la docs/features/
   ```
   Expected: REMINDERS.md exists

2. Content verification:
   ```bash
   grep -c "sequenceDiagram" docs/features/REMINDERS.md
   ```
   Expected: At least 4 (Create, Read, Update, Delete flows)

3. Lifecycle documentation:
   ```bash
   grep -c "stateDiagram" docs/features/REMINDERS.md
   ```
   Expected: At least 1 (lifecycle states)

4. README status:
   ```bash
   grep "REMINDERS.md" docs/README.md | grep -i "available"
   ```
   Expected: Match found

5. Navigation link:
   ```bash
   grep "features/REMINDERS.md" docs/README.md
   ```
   Expected: At least 2 matches (navigation table + status table)
</verification>

<success_criteria>
1. docs/features/REMINDERS.md exists with CRUD documentation
2. Data flow from UpsertReminderActivity to Room is documented with sequence diagrams
3. Reminder lifecycle states (active, inactive, expired) are explained with state diagram
4. Sequence diagrams show create/edit/delete flows
5. Developer can trace a reminder creation through the code using the documentation
6. docs/README.md shows REMINDERS.md as "Available"
</success_criteria>

<output>
After completion, create `.planning/phases/06-reminders-feature/06-01-SUMMARY.md` using the summary template with:
- Files created/modified
- Key documentation sections added
- Decisions made during documentation
- Links to the created documentation
</output>
